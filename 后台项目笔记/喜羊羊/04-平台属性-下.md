

# 添加或修改



```js
点击添加或修改页面的属性值按钮（添加属性的时候和修改属性的时候都可以添加属性值）


1.添加属性值，最终就是造一个对象，添加到attrForm.attrValueList当中

attrId 代表的是当前这个属性值所属属性的id，在添加属性的时候是undefined，在修改属性的时候的是属性的id

2.添加的时候的属性值的名字不能写死，最好是让用户输入，需要使用占位思想（配合table实现）

table当中去展示属性值列表，一开始属性值列表当中是没有数据的，所有他变了显示的时候就没有数据

当点击按钮往属性值列表中添加一项，那么数组当中有了一条数据，table当中就出现一行

出现的行当中 目的是为了给用户机会去输入属性值名称，在每一行当中应该有一个input

后期用户输入数据的时候再通过v-model把输入的属性值名称收集给到添加进去的这个属性值对象
```





# 解决点击添加后取消再次点击添加数据依然存在的问题





# 修改

```js
找到修改按钮HintButton组件
点击修改showUpdateDiv(row)

```



```js
解决改数据的之后，点取消，列表内的数据发生改变的问题
这里的对象里有属性值列表（数组）这个结构，因此这里要深拷贝
按需引用lodash中的深拷贝
import cloneDeep from 'lodash/cloneDeep'
```





# 属性值的编辑模式与查看模式



把老的属性值添加模式`isEdit`标识

## 模式切换

```js
点击span从查看模式切换为编辑模式
toEdit
```



```js
失焦或回车input从编辑模式切换为查看模式
toLook
keyup事件需要加native修饰符

两个限制：
1.数据不能为空
2.除了自己之外，输入的数据不能和其他的属性值名称重复
不写else return的是undefined 相当于return了false
```





```js
出现input的时候自动获取焦点

通过下标找到对应的
this.$refs[index].focus()

$nextTick(() => {})		页面最近一次更新完成之后再调回调
常在哪用？
1.数据更新导致页面结构更新
2.页面结构更新完成之后立即执行的逻辑
```



```js
$nextTick(() => {
    this.$refs[index].focus()
})
```



# 重要！！！复习响应式数据原理：

```js
在vue当中数据分为对象和数组

数组数据响应式是考重写的7个方法达到响应式的，不能用数组的下标去操作值，即操作数组必须采用方法去操作




对象数据响应式是靠	数据劫持
1.一开始data中所有的属性，无论深浅全是响应式，添加了get和set后期修改这些属性，页面会随之改变

data内部的响应式属性，如果修改这个属性，那么修改的新数据也会变为响应式
data内部的响应式属性，如果添加一个新的属性，那么新添加的不是响应式，因为劫持时间早都过了（在beforeCreat与Created之间）
```



点击列表页的修改

```js
item.isEdit = false 这个写法添加的属性不是响应式的


给响应式数据添加一个新属性，并且让这个新属性也是响应式的
this.$set(给谁添，添什么属性，属性值是什么)		这样添加的就是响应式的
```





# 点击删除属性值

```js
官网找气泡确认框

气泡确认框点击确定按钮的事件名称叫 onConfirm 不是confirm  （经源码确认）官网写错了
```



# 点击保存

```js
1.获取请求参数
2.整理参数
	a、属性值名称如果为空串，从属性值列表当中去除
	b、属性值当中去除isEdit属性
	c、属性值列表如果没有属性值，不发请求
3.发请求
4.成功干啥
5.失败干啥
```





# 点击列表页删除属性

`deleteAttr`







# 可操作性处理















































