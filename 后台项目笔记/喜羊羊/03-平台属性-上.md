# 删除

```
点击删除弹出messagebox组件

去官网查
```





```
判断删除的时候，当前页有多少条数据

若只有一项则跳到上一页，若有多项则在当前页

不用担心若只有一页且只有一条数据的情况，后台做了处理
```



# 验证

```
在官网查form的表单验证

在form上加上 `:model`  用来收集表单数据对象，主要是为了表单验证添加的

添加它可以让表单验证的规则对象和收集数据的对象、字段进行关联



再添加一个 `:rules="rules"` 

在data里rules是表单验证的规则对象

每个属性代表的是一个字段，对象里是一个个字段和model对应起来的，字段值是一个数组，代表着规则数组

数组内部又是一个一个的规则对象

规则对象必须包含一个trigger，代表触发方式（触发时机）

触发时机分为三种 ： blur	change	还要整体校验的时候也会触发
```



```
图片触发不了

因此需要整体校验

单个校验不能阻止发请求，

因此单个校验需要配合整体校验
```



整体校验是在组件对象上的validate方法

里面是一个回调函数，

**思考回调什么时候调？**

参数valid是验证结果，因此这个函数是在验证之后调用的



## 自定义校验规则



在data里写验证器函数，用的时候不用写this



在官网查自定义校验规则



# 平台属性管理

## 搭建平台属性的列表页架子及定义三级蓝洞组件架子

```js
两个el-card组件		中间20px间距
一个是三级联动
一个是平台属性管理
```



```js
以后还要用因此定义全局组件
定义：在components里定义CategorySelector组件
注册：全局注册，在main.js
使用：
```



## 第一个el-card之三级联动

### 静态

```js
在官网找行内表单
即加上 :inline="true"

删掉model、class
留下中间的一项
活动区域改为一级分类

select和option身上必须添加value属性，解决警告

二级三级复制粘贴
```



### 动态

api中

category.js



```js
默认暴露

请求获取所有的一级分类
getCategory1()
根据选中的一级分类id获取、对应的二级分类

根据选中的二级分类id获取、对应的三级分类
```



```js
引入并暴露
export {default as category} from './category'
```



#### 一级分类

```js
在组件中发请求
getCategory1List()
```



```js
select当中的v-model收集的是选中的option的value的值
```



```js
只要是form表单都要写一个  :model
在data中定义  cForm  即为上面form要收集的数据的对象

cForm就是上面form要收集的数据的对象，
以后记住只要是form表单必须要写一个 :model   model必然是一个对象
:model两个作用：
1.往哪里收集
2.规则
```



```js
Select组件中有比watch更好的手段
change事件	选中值发生变化时触发	回调参数是：目前的选中值
事件回调名	handlerCategory【x】
```



```js
选中一级触发父组件Attr的自定义事件changeCategory
```





#### 三级联动必然存在的bug

点完三级分类后，回去点一级分类，二三级上的值没有为空的问题

```js
选一级  清空二三级数据
选二级	 清空三级
```





#### 选中一、二、三级触发对应的自定义事件

```js
方法一：添加一个level标识，在回调中判断是几级id，然后保存起来，再发请求

```



```js
子组件当中选中一级，清空23级及属性列表数据
子组件选择最新的一级，子组件就会清空23级，也就是说后面是要选择最新的23级
父组件当中保存的23级是之前的老的23级，也没用了，需要清空
父组件的属性列表数据也不见了，代表属性列表数据也要被清空
```



#### 选2清3

#### 选3重新发请求

```js
陶志强方法二：直接传cForm这个对象
```



## 第二个el-card

#### 静态

里面是一个tabel

第一列80  px

第二第四150px





。。。

属性值列表中是tag组件

查官网





封装HintButton组件（用到 `$attr` 和 `$listener` ）



#### 动态

```js
v-show展示  属性列表界面或者添加界面
isShowList
```



```js
点击添加属性出来的结构：

按钮

表格	margin:20px 0

按钮
```





```js
收集数据

这个对象是添加的时候需要收集的对象
修改的时候收集的对象不是定义的这个对象，而是后期拷贝的回显数据的对象
但是这两个对象最终都是赋值给了attrForm
attrForm:{
    attrName:"",
    attrValueList:[],
        data当中的数据，赋值给另外一个数据的时候，并不能按照响应式对待
    	响应式是数据改变引起页面的改变，数据的改变无法引起另外一个data的数据改变
    categoryId:	0,		要的是三级id
    categoryLevel: 3,
}
后期修改的时候有id，需要拷贝
```





































